# 技术指标公式详解

> 本文档详细说明各技术指标的计算公式

## 1. MA (移动平均线)

### 简单移动平均线 (SMA)

**公式**:
```
MA(n) = (P1 + P2 + ... + Pn) / n
```

**说明**:
- `n`: 周期（如 5日、10日、20日）
- `P`: 收盘价

**常用周期**:
- 5日MA: 短期趋势
- 10日MA: 中短期趋势
- 20日MA: 月线（约1个月）
- 60日MA: 季线（约3个月）

---

## 2. MACD (指数平滑异同移动平均线)

### 组成部分

**1. DIF (差离值)**:
```
DIF = EMA(12) - EMA(26)
```

**2. DEA (信号线)**:
```
DEA = EMA(DIF, 9)
```

**3. BAR (柱状图)**:
```
BAR = 2 × (DIF - DEA)
```

**说明**:
- `EMA`: 指数移动平均线
- 默认参数: 快线12，慢线26，信号线9

---

## 3. RSI (相对强弱指标)

**公式**:
```
RS = 平均涨幅 / 平均跌幅
RSI = 100 - (100 / (1 + RS))
```

**计算步骤**:
1. 计算每日价格变动
2. 分别计算 n 日内平均涨幅和平均跌幅
3. 计算 RS
4. 计算 RSI

**默认周期**: 14日

---

## 4. BOLL (布林带)

**公式**:
```
中轨 (MIDDLE) = MA(n)
上轨 (UPPER) = MIDDLE + k × STD(n)
下轨 (LOWER) = MIDDLE - k × STD(n)
```

**说明**:
- `MA(n)`: n 日移动平均线
- `STD(n)`: n 日标准差
- `k`: 标准差倍数（通常为 2）

**默认参数**: 周期20，标准差倍数2

---

## 计算注意事项

1. **EMA 计算**: 需要递归计算，初始值通常为 SMA
2. **数据量要求**: 
   - MA: 至少 n 行
   - MACD: 至少 34 行
   - RSI: 至少 15 行
   - BOLL: 至少 21 行
3. **精度**: 浮点数计算，保留 2-4 位小数
