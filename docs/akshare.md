
# ğŸ“‘ AKShare ä½¿ç”¨è¯´æ˜æ–‡æ¡£

## 1. åº“ç®€ä»‹
- **ç”¨é€”**ï¼šAKShare æ˜¯ä¸€ä¸ªå¼€æºçš„ Python é‡‘èæ•°æ®æ¥å£åº“ï¼Œæ—¨åœ¨ä¸ºé‡åŒ–ç ”ç©¶è€…å’Œæ•°æ®åˆ†æçˆ±å¥½è€…æä¾›ä¸°å¯Œçš„è´¢ç»æ•°æ®ã€‚  
- **ç‰¹ç‚¹**ï¼š  
  - è¦†ç›–èŒƒå›´å¹¿ï¼šè‚¡ç¥¨ã€æœŸè´§ã€åŸºé‡‘ã€å€ºåˆ¸ã€æœŸæƒã€å¤–æ±‡ã€åŠ å¯†è´§å¸ã€å®è§‚ç»æµæ•°æ®ç­‰ã€‚  
  - **å¼€æºå…è´¹**ï¼Œæ— éœ€æ³¨å†Œæˆ– Tokenã€‚  
  - æä¾› **HTTP API** ä¸ **Python SDK**ï¼Œæ”¯æŒå¿«é€Ÿè°ƒç”¨ã€‚  
  - ä¸ `pandas`ã€`numpy` ç­‰æ•°æ®ç§‘å­¦åº“å…¼å®¹ï¼Œé€‚åˆé‡åŒ–ç ”ç©¶ä¸æ•™å­¦ã€‚  

---

## 2. å®‰è£…ä¸é…ç½®
- **å®‰è£…å‘½ä»¤**ï¼š
  ```bash
  pip install akshare --upgrade
  ```
- **å›½å†…é•œåƒå®‰è£…**ï¼š
  ```bash
  pip install akshare -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com --upgrade
  ```
- **ç¯å¢ƒå»ºè®®**ï¼š
  - Python 3.9+ï¼ˆ64 ä½ï¼‰  
  - å»ºè®®åœ¨è™šæ‹Ÿç¯å¢ƒï¼ˆvenv/condaï¼‰ä¸­å®‰è£…ã€‚  

---

## 3. ä½¿ç”¨æ–¹å¼

### è·å– A è‚¡å†å²æ•°æ®
```python
import akshare as ak
df = ak.stock_zh_a_hist(symbol="000001", period="daily", start_date="20170301", end_date="20231022", adjust="")
print(df.head())
```

### è·å–ç¾è‚¡æ•°æ®å¹¶ç»˜åˆ¶ K çº¿å›¾
```python
import akshare as ak
import mplfinance as mpf

df = ak.stock_us_daily(symbol="AAPL", adjust="qfq")
df = df.set_index(["date"])
df = df["2020-04-01":"2020-04-29"]

mpf.plot(df, type="candle", mav=(3,6,9), volume=True, show_nontrading=False)
```

### è·å– ETF æ•°æ®
---

- æŸ¥è¯¢ç›¸å…³å‡½æ•°ï¼ˆAKShare 1.17.90 å¯ç”¨ï¼‰
ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¿«é€ŸæŸ¥çœ‹å½“å‰ç‰ˆæœ¬çš„ ETF ç›¸å…³å‡½æ•°ï¼š
```python
import akshare as ak

# åˆ—å‡ºæ‰€æœ‰åŒ…å« etf çš„å‡½æ•°
etf_funcs = [f for f in dir(ak) if "etf" in f.lower()]
print(etf_funcs)
```

åœ¨ **1.17.90** ç‰ˆæœ¬ä¸­ï¼ŒETF ç›¸å…³å‡½æ•°åŒ…æ‹¬ï¼š
- `fund_etf_category_sina`  
- `fund_etf_dividend_sina`  
- `fund_etf_fund_daily_em`  
- `fund_etf_fund_info_em`  
- `fund_etf_hist_em`  
- `fund_etf_hist_min_em`  
- `fund_etf_hist_sina`  
- `fund_etf_spot_em`  
- `fund_etf_spot_ths`  
- ä»¥åŠéƒ¨åˆ† ETF æœŸæƒç›¸å…³å‡½æ•°ï¼ˆå¦‚ `index_option_50etf_qvix` ç­‰ï¼‰ã€‚

---

#### ğŸ”¹ å®æ—¶è¡Œæƒ…
```python
import akshare as ak

# æ–°æµªï¼šå…¨å¸‚åœº ETF å®æ—¶è¡Œæƒ…
df_realtime_sina = ak.fund_etf_category_sina()
print(df_realtime_sina.head())

# ä¸œæ–¹è´¢å¯Œï¼šETF å®æ—¶è¡Œæƒ…
df_realtime_em = ak.fund_etf_spot_em()
print(df_realtime_em.head())

# åŒèŠ±é¡ºï¼šETF å®æ—¶è¡Œæƒ…
df_realtime_ths = ak.fund_etf_spot_ths()
print(df_realtime_ths.head())

# å¤©å¤©åŸºé‡‘ç½‘ï¼šå½“å‰äº¤æ˜“æ—¥æ‰€æœ‰ ETF æ•°æ®
df_daily_em = ak.fund_etf_fund_daily_em()
print(df_daily_em.head())
```

---

#### ğŸ”¹ å†å²è¡Œæƒ…
```python
# ä¸œæ–¹è´¢å¯Œï¼šETF å†å²è¡Œæƒ…ï¼ˆæ—¥/å‘¨/æœˆï¼Œæ”¯æŒå¤æƒï¼‰
df_hist_em = ak.fund_etf_hist_em(
    symbol="510300", 
    period="daily", 
    start_date="20251127", 
    end_date="20251127", 
    adjust="qfq"
)
print(df_hist_em)

# ä¸œæ–¹è´¢å¯Œï¼šETF åˆ†é’Ÿçº§åˆ«æ•°æ®
df_min_em = ak.fund_etf_hist_min_em(
    symbol="510300", 
    start_date="20251101", 
    end_date="20251130", 
    period="1"
)
print(df_min_em.head())

# æ–°æµªï¼šETF å…¨é‡å†å²æ•°æ®ï¼ˆéœ€æ‰‹åŠ¨è¿‡æ»¤ï¼‰
df_hist_sina = ak.fund_etf_hist_sina(symbol="510300")
print(df_hist_sina.head())
```

---

#### ETF æ¥å£å¯¹æ¯”è¡¨

| å‡½æ•°å                   | æ•°æ®æº       | æ•°æ®ç±»å‹   | æ”¯æŒå‚æ•°                  | é€‚ç”¨åœºæ™¯ |
|--------------------------|--------------|------------|---------------------------|----------|
| `fund_etf_category_sina` | æ–°æµªè´¢ç»     | å®æ—¶è¡Œæƒ…   | æ— éœ€å‚æ•°ï¼ˆå…¨å¸‚åœºï¼‰        | å¿«é€Ÿè·å–å…¨å¸‚åœº ETF å®æ—¶è¡Œæƒ… |
| `fund_etf_spot_em`       | ä¸œæ–¹è´¢å¯Œ     | å®æ—¶è¡Œæƒ…   | æ— éœ€å‚æ•°ï¼ˆå…¨å¸‚åœºï¼‰        | ä¸œæ–¹è´¢å¯Œ ETF å®æ—¶è¡Œæƒ… |
| `fund_etf_spot_ths`      | åŒèŠ±é¡º       | å®æ—¶è¡Œæƒ…   | æ— éœ€å‚æ•°ï¼ˆå…¨å¸‚åœºï¼‰        | åŒèŠ±é¡º ETF å®æ—¶è¡Œæƒ… |
| `fund_etf_fund_daily_em` | å¤©å¤©åŸºé‡‘ç½‘   | å½“æ—¥æ•°æ®   | æ— éœ€å‚æ•°ï¼ˆå…¨å¸‚åœºï¼‰        | è·å–å½“å‰äº¤æ˜“æ—¥æ‰€æœ‰ ETF æ•°æ® |
| `fund_etf_hist_em`       | ä¸œæ–¹è´¢å¯Œ     | å†å²è¡Œæƒ…   | `symbol`, `period`, `start_date`, `end_date`, `adjust` | è·å–æ—¥/å‘¨/æœˆå†å²è¡Œæƒ…ï¼Œæ”¯æŒå¤æƒ |
| `fund_etf_hist_min_em`   | ä¸œæ–¹è´¢å¯Œ     | åˆ†é’Ÿçº§åˆ«   | `symbol`, `start_date`, `end_date`, `period` | è·å–åˆ†é’Ÿçº§åˆ«æ•°æ®ï¼ˆ1/5/15/30/60åˆ†é’Ÿï¼‰ |
| `fund_etf_hist_sina`     | æ–°æµªè´¢ç»     | å†å²è¡Œæƒ…   | `symbol`                  | è¿”å›å…¨é‡å†å²æ•°æ®ï¼Œéœ€æ‰‹åŠ¨è¿‡æ»¤ |

---
âœ… æ€»ç»“
- **å®æ—¶è¡Œæƒ…**ï¼šç”¨ `fund_etf_category_sina`ï¼ˆæ–°æµªï¼‰ã€`fund_etf_spot_em`ï¼ˆä¸œæ–¹è´¢å¯Œï¼‰ã€`fund_etf_spot_ths`ï¼ˆåŒèŠ±é¡ºï¼‰ã€‚  
- **å½“æ—¥æ•°æ®**ï¼šç”¨ `fund_etf_fund_daily_em`ï¼ˆå¤©å¤©åŸºé‡‘ç½‘ï¼‰ã€‚  
- **å†å²è¡Œæƒ…**ï¼šç”¨ `fund_etf_hist_em`ï¼ˆä¸œæ–¹è´¢å¯Œï¼Œæ”¯æŒå¤æƒå’Œæ—¶é—´èŒƒå›´ï¼‰ã€`fund_etf_hist_min_em`ï¼ˆåˆ†é’Ÿçº§åˆ«ï¼‰ã€`fund_etf_hist_sina`ï¼ˆæ–°æµªï¼Œå…¨é‡æ•°æ®ï¼‰ã€‚  
- **æ¨èå®è·µ**ï¼šç ”ç©¶/å›æµ‹ç”¨ä¸œæ–¹è´¢å¯Œæ¥å£ï¼Œå¿«é€Ÿæ¼”ç¤ºç”¨æ–°æµªæ¥å£ï¼Œäº¤å‰éªŒè¯å¯ç”¨åŒèŠ±é¡º/å¤©å¤©åŸºé‡‘ç½‘ã€‚  

---

## 4. æ•°æ®èŒƒå›´
- **å¸‚åœºè¦†ç›–**ï¼šè‚¡ç¥¨ã€åŸºé‡‘ï¼ˆETF/LOFï¼‰ã€æœŸè´§ã€æœŸæƒã€å€ºåˆ¸ã€å¤–æ±‡ã€åŠ å¯†è´§å¸ã€å®è§‚ç»æµæ•°æ®ã€‚  
- **æ—¶é—´èŒƒå›´**ï¼šæ”¯æŒ Tickã€åˆ†é’Ÿã€æ—¥Kã€å‘¨Kã€æœˆKã€‚  
- **æ•°æ®æº**ï¼šä¸œæ–¹è´¢å¯Œã€æ–°æµªè´¢ç»ã€äº¤æ˜“æ‰€å®˜ç½‘ç­‰ã€‚   

---

## 5. ç‰ˆæœ¬ä¸åŠŸèƒ½
- **å¼€æºå…è´¹**ï¼šæ— éœ€è´¦å·æˆ– Tokenã€‚  
- **åŠŸèƒ½ç‰¹ç‚¹**ï¼š  
  - ä¸€è¡Œä»£ç å³å¯è·å–æ•°æ®ã€‚  
  - æ”¯æŒæ‰¹é‡ä¸‹è½½ä¸æœ¬åœ°å­˜å‚¨ã€‚  
  - æä¾› HTTP APIï¼Œé€‚åˆè·¨è¯­è¨€è°ƒç”¨ã€‚  
- **é™åˆ¶**ï¼š  
  - æ•°æ®ä»…ä¾›å­¦æœ¯ç ”ç©¶ä¸å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚  
  - éƒ¨åˆ†æ¥å£å¯èƒ½å› æ•°æ®æºå˜åŠ¨è€Œå¤±æ•ˆã€‚  

---

## 6. ç¤ºä¾‹ä»£ç ï¼ˆæœ€å°å¯è¿è¡Œï¼‰

### è·å– ETF å†å²è¡Œæƒ…å¹¶ä¿å­˜ CSV
```python
import akshare as ak
import pandas as pd

df = ak.fund_etf_hist_sina(symbol="510300")
df.to_csv("data/510300_etf.csv", index=False)
```

---

## 7. æ³¨æ„äº‹é¡¹
- **æ•°æ®ä¸€è‡´æ€§**ï¼šä¸åŒæ•°æ®æºçš„æ—¶é—´æˆ³å¯èƒ½ä¸åŒï¼Œéœ€ç»Ÿä¸€ä¸º `datetime`ã€‚  
- **æ¥å£ç¨³å®šæ€§**ï¼šéƒ¨åˆ†æ¥å£ä¾èµ–ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œå¯èƒ½éšæ—¶å˜åŠ¨ã€‚  
- **ç”¨é€”é™åˆ¶**ï¼šä»…ä¾›å­¦æœ¯ç ”ç©¶ï¼ŒéæŠ•èµ„å»ºè®®ã€‚  

---
å®Œå…¨æ­£ç¡® ğŸ‘ã€‚ä½ çš„ **AKShare ä½¿ç”¨è¯´æ˜æ–‡æ¡£**ç›®å‰å·²ç»æ¶µç›–äº†å®‰è£…ã€è°ƒç”¨å’Œæ•°æ®èŒƒå›´ï¼Œä½†è¿˜ç¼ºå°‘å¯¹ **å¼‚å¸¸å¤„ç†ä¸æ¥å£ä¸ç¨³å®šæ€§** çš„è¯´æ˜ã€‚ç»“åˆæˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºï¼Œå¯ä»¥åœ¨æ–‡æ¡£é‡Œå¢åŠ ä¸€ä¸ª **å¼‚å¸¸å¤„ç†ç« èŠ‚**ï¼Œè®©åç»­ä½¿ç”¨æ›´è§„èŒƒã€‚

---

## 8. å¼‚å¸¸å¤„ç†ä¸æ³¨æ„äº‹é¡¹

- **æ¥å£ç¨³å®šæ€§**  
  - AKShare çš„éƒ¨åˆ†æ¥å£ä¾èµ–ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼ˆå¦‚æ–°æµªè´¢ç»ã€ä¸œæ–¹è´¢å¯Œï¼‰ï¼Œå¯èƒ½å› ç½‘ç«™æ”¹ç‰ˆæˆ–é•œåƒæ›´æ–°è€Œä¸´æ—¶ä¸å¯ç”¨ã€‚  
  - ä¸åŒç‰ˆæœ¬çš„ AKShare å¯¹åŒä¸€å‡½æ•°/å‚æ•°çš„è¡Œä¸ºå¯èƒ½ä¸åŒï¼Œå»ºè®®å§‹ç»ˆä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼š  
    ```bash
    pip install akshare --upgrade
    ```

- **è¿”å›ç©ºæ•°æ®çš„å¸¸è§åŸå› **  
  1. **API åç«¯æˆ–é•œåƒæ›´æ–°**ï¼šæ¥å£å‚æ•°å˜æ›´æˆ–æ•°æ®æºä¸´æ—¶ä¸‹çº¿ã€‚  
  2. **ç‰ˆæœ¬å·®å¼‚**ï¼šä¸åŒç‰ˆæœ¬çš„ AKShare å¯¹åŒä¸€å‡½æ•°çš„å‚æ•°è¦æ±‚å¯èƒ½ä¸åŒã€‚  
  3. **ç¬¦å·æ ¼å¼é—®é¢˜**ï¼šéƒ¨åˆ†æ¥å£éœ€è¦å¸¦äº¤æ˜“æ‰€å‰ç¼€/åç¼€ï¼ˆå¦‚ `000001.SZ`ï¼‰ï¼Œä¸åŒæ¥å£æ¥å—çš„æ ¼å¼å¯èƒ½ä¸åŒã€‚  
  4. **ç½‘ç»œ/é™æµ/åçˆ¬**ï¼šç½‘ç»œç¯å¢ƒä¸ç¨³å®šæˆ–æ•°æ®æºé™æµå¯èƒ½å¯¼è‡´è¿”å›ç©ºã€‚  

- **å¼‚å¸¸å¤„ç†å»ºè®®**  
  - åœ¨æ•°æ®è·å–è„šæœ¬ä¸­åŠ å…¥å¼‚å¸¸æ•è·ï¼š  
    ```python
    import akshare as ak
    import logging

    logging.basicConfig(filename="logs/akshare_errors.log", level=logging.WARNING)

    try:
        df = ak.fund_etf_hist_sina(symbol="510300")
        if df.empty:
            logging.warning("Empty dataframe returned for symbol 510300")
    except Exception as e:
        logging.error(f"Error fetching data: {e}")
    ```
  - å½“è¿”å›ç©ºæ•°æ®æ—¶ï¼Œè‡ªåŠ¨è®°å½•æ—¥å¿—å¹¶å°è¯• fallback åˆ°å…¶ä»–æ•°æ®æºï¼ˆå¦‚ efinanceã€tushareï¼‰ã€‚  
  - åœ¨æ¸…æ´—è„šæœ¬ä¸­ä¿ç•™å¼‚å¸¸æ—¥å¿—ï¼Œä¾¿äºåç»­äººå·¥ç¡®è®¤ã€‚  

- **æœ€ä½³å®è·µ**  
  - ä¿æŒ AKShare æœ€æ–°ç‰ˆæœ¬ã€‚  
  - åœ¨è°ƒç”¨å‰ç¡®è®¤å‚æ•°æ ¼å¼æ˜¯å¦ç¬¦åˆå®˜æ–¹æ–‡æ¡£ç¤ºä¾‹ã€‚  
  - é‡åˆ°è¿”å›ç©ºæ—¶ï¼Œå…ˆæ£€æŸ¥ç½‘ç»œä¸é™æµï¼Œå†ç¡®è®¤æ˜¯å¦æ˜¯æ•°æ®æºä¸´æ—¶ä¸å¯ç”¨ã€‚  
  - åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›´æ¥è¿‡æ»¤å¼‚å¸¸ï¼Œåœ¨ç ”ç©¶ç¯å¢ƒä¸­è®°å½•æ—¥å¿—åäººå·¥ç¡®è®¤ã€‚  

---

## ğŸ“š å‚è€ƒèµ„æ–™ï¼ˆAKShareï¼‰
1. [AKShare å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://akshare.akfamily.xyz/)  
2. [AKShare GitHub ä»“åº“](https://github.com/akfamily/akshare?tab=readme-ov-file)  
